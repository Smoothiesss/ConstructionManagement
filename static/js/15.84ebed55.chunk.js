(this.webpackJsonpConstructionManagement=this.webpackJsonpConstructionManagement||[]).push([[15],{1224:function(t,e,a){},1226:function(t,e,a){},1338:function(t,e,a){"use strict";a.r(e);var n=a(161),o=a(162),r=a(164),l=a(163),i=a(1277),s=a(1323),c=a(928),d=a(165),m=a.n(d),u=a(166),h=a.n(u),p=a(684),g=a.n(p),f=a(1),D=a.n(f),y=a(679),Y=a(680),M=a(717),v=a(1276),C=(a(1224),function(t){Object(r.a)(a,t);var e=Object(l.a)(a);function a(){return Object(n.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var t=this.props,e=(t.maxValue,t.minValue,t.dataKeyMap),a=t.dataColorMap,n=(t.dataMaxMin,t.unit),o=t.labelTooltip,r=void 0===o?"":o,l=t.minWidth,i=void 0===l?250:l;return D.a.createElement(v.e,null,this.props.data.length>0?D.a.createElement(v.d,{data:this.props.data,margin:{top:5,right:35,left:-20,bottom:6}},D.a.createElement(v.a,{strokeDasharray:"3 3"}),D.a.createElement(v.g,{axisLine:!1,tickLine:!1,dataKey:"name"}),D.a.createElement(v.h,{axisLine:!1,tickLine:!1}),D.a.createElement(v.f,{content:function(t){var a=t.payload,o=t.label;return D.a.createElement("div",{className:"hover-style-stack",style:{fontSize:"13px",boxShadow:" 2px 2px 8px 0 rgba(0, 0, 0, 0.4)  ",width:i}},D.a.createElement("div",{className:"stack-title"},r," ",o),a.map((function(t,a){return e[t.dataKey]?D.a.createElement("div",{key:a,className:"detail-style-stack"},D.a.createElement("span",{className:"dot-detail",style:{backgroundColor:t.color}}),D.a.createElement("span",{className:"detail-title"},e[t.dataKey]),D.a.createElement("span",{className:"detail-value"},t.value?t.value:"0",D.a.createElement("span",{style:{paddingLeft:"5px"},dangerouslySetInnerHTML:{__html:t.payload[t.name+"_unit"]?t.payload[t.name+"_unit"]:n||""}}))):null})))}}),D.a.createElement(v.b,{content:function(t){var a=t.payload;return D.a.createElement("div",null,D.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}},a.map((function(t,a){return e[t.dataKey]?D.a.createElement("div",{key:"item-".concat(a),style:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:10}},D.a.createElement("div",{style:{height:10,width:10,borderRadius:5,background:t.color,marginRight:5,fontSize:10}}),D.a.createElement("span",{style:{fontSize:12,color:"#000000"}},e[t.dataKey])):null}))))}}),a.map((function(t,e){return t.key.includes("Max")||t.key.includes("Min")||t.key.includes("dm_")?D.a.createElement(v.c,{type:"monotone",key:e,dataKey:t.key,stroke:t.color,dot:!1,strokeDasharray:"5 5"}):D.a.createElement(v.c,{type:"monotone",key:e,dataKey:t.key,stroke:t.color})}))):D.a.createElement("div",null))}}]),a}(f.PureComponent)),E=a(1225),b=a.n(E),k=(a(1226),a(678)),x=function(t){Object(r.a)(a,t);var e=Object(l.a)(a);function a(t){var o;return Object(n.a)(this,a),(o=e.call(this,t)).state={flag:!1},o}return Object(o.a)(a,[{key:"exportDom",value:function(){var t=this;this.setState({flag:!0}),this.props.onDownload&&this.props.onDownload();var e=this.props,a=(e.title,e.subTitle),n=e.dom,o=document.getElementById(n);b.a.toPng(o,{quality:1,bgcolor:"white"}).then((function(t){var e=document.createElement("a");e.href=t;var n=a.replace("/","").replace("/","");e.download=n.replace(/span|sub|<|>/gi,""),e.click(),URL.revokeObjectURL(t)})).catch((function(t){console.error("oops, something went wrong!",t)})).finally((function(){t.props.onDownloaded&&t.props.onDownloaded()}))}},{key:"loading",value:function(){if(this.state.flag)return D.a.createElement(M.a,null)}},{key:"render",value:function(){var t=this,e=this.props,a=e.subTitle,n=e.dom,o=e.headerColor,r=e.exportIconColor;return D.a.createElement("div",{className:"export-chart",style:{height:"100%"}},D.a.createElement("div",{className:"box-chart",id:n},D.a.createElement("div",{className:"content-box-chart",style:{backgroundColor:o||"#eee",borderBottom:"2px solid",borderBottomColor:r||"#ccc"}},D.a.createElement("div",{className:"title-box-chart"},D.a.createElement("div",{className:"sub-title",dangerouslySetInnerHTML:{__html:a}})),D.a.createElement("button",{title:"Xu\u1ea5t bi\u1ec3u \u0111\u1ed3",type:"button",style:{backgroundColor:r||"#ccc"},className:"btn btn-export button-export",onClick:function(){return t.exportDom()}},D.a.createElement(k.a,{style:{zIndex:10,color:"#fff",fontSize:12},name:"cilDataTransferDown"}))),D.a.createElement(C,this.props)))}}]),a}(f.Component),T=x;x.defaultProps={background:"#0093d9"};var _=a(706),O=i.a.RangePicker,I={labelCol:{span:6},wrapperCol:{span:16}},S=function(t){Object(r.a)(a,t);var e=Object(l.a)(a);function a(t){var o;return Object(n.a)(this,a),(o=e.call(this,t)).exportExcel=function(){window.open(Y.a.GLOBAL_API_PATH+y.c)},o.state={data:[{subTitle:"T\u1ed5ng ch\xeanh l\u1ec7ch (T\u1ea5n)",results:[],dataKeyMap:{da:"\u0110\xe1",catSong:"C\xe1t S\xf4ng",xiMang:"Xi m\u0103ng",troBay:"Tro bay",nuoc:"N\u01b0\u1edbc",phuGia1:"Ph\u1ee5 gia 1",phuGia2:"Ph\u1ee5 gia 2"},dataColorMap:[{key:"da",color:"#264653",name:"da"},{key:"catSong",color:"#2a9d8f",name:"catSong"},{key:"xiMang",color:"#e9c46a",name:"xiMang"},{key:"troBay",color:"#f4a261",name:"troBay"},{key:"nuoc",color:"blue",name:"nuoc"},{key:"phuGia1",color:"#e76f51",name:"phuGia1"},{key:"phuGia2",color:"#a8dadc",name:"phuGia2"}],unit:"T\u1ea5n"},{subTitle:"T\u1ed5ng ch\xeanh l\u1ec7ch (M\xe9t kh\u1ed1i)",results:[],dataKeyMap:{da_1m3:"\u0110\xe1",catSong_1m3:"C\xe1t",xiMang_1m3:"Xi m\u0103ng",phuGia1_1m3:"Ph\u1ee5 gia 1",phuGia2_1m3:"Ph\u1ee5 gia 2"},dataColorMap:[{key:"da_1m3",color:"#264653",name:"da_1m3"},{key:"catSong_1m3",color:"#2a9d8f",name:"catSong_1m3"},{key:"xiMang_1m3",color:"#e9c46a",name:"xiMang_1m3"},{key:"phuGia1_1m3",color:"#e76f51",name:"phuGia1"},{key:"phuGia2_1m3",color:"#a8dadc",name:"phuGia2"}],unit:"m3"}],loading:!0,year:g()().year(),startDate:g()(g()().format("DD/MM/YYYY"),"DD/MM/YYYY").add(-1,"Y").format("DD/MM/YYYY"),endDate:g()().format("DD/MM/YYYY"),typeFilter:1},o.labelTooltip="Ch\xeanh l\u1ec7ch",o}return Object(o.a)(a,[{key:"getRangeDateMonth",value:function(t,e){for(var a=[],n=g()(e,"DD/MM/YYYY").endOf("month"),o=g()(t,"DD/MM/YYYY").startOf("month");o<=n;){var r={label:o.format("MM/YYYY"),end:o.endOf("month").format("DD/MM/YYYY"),start:o.startOf("month").format("DD/MM/YYYY")};a.push(r),o.add(1,"M")}return a}},{key:"getRangeDate",value:function(t,e){for(var a=[],n=g()(e,"DD/MM/YYYY"),o=g()(t,"DD/MM/DYYYY");o<=n;){var r={label:o.format("DD/MM/YYYY")};a.push(r),o.add(1,"d")}return a}},{key:"componentDidMount",value:function(){var t=this,e=m.a.get(Y.a.GLOBAL_API_PATH+y.p),a=m.a.get(Y.a.GLOBAL_API_PATH+y.f),n=m.a.get(Y.a.GLOBAL_API_PATH+y.w);m.a.all([e,a,n]).then(m.a.spread((function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var o=a[0],r=a[1],l=a[2];a&&(t.setState({dataMac:o.data.result,dataHopDong:r.data.result,dataSaiSo:l.data.result}),t.loadData(l.data.result,t.state.startDate,t.state.endDate,t.state.typeFilter))}))).catch((function(){Y.a.ToastError()})).finally((function(){}))}},{key:"onChangeMac",value:function(t){var e=this;this.loadingComponent&&this.loadingComponent.onLoading();var a={startDate:this.state.startDate?g()(this.state.startDate,"DD/MM/YYYY").format("DD/MM/YYYY"):"",endDate:this.state.endDate?g()(this.state.endDate,"DD/MM/YYYY").format("DD/MM/YYYY"):"",macCode:t||"",hopDongId:this.state.hopDongId?this.state.hopDongId:""};m.a.post(Y.a.GLOBAL_API_PATH+y.y,a).then((function(a){var n=a.data;n.success&&(e.loadData(n.result,e.state.startDate,e.state.endDate,e.state.typeFilter),e.setState({macCode:t}))})).catch((function(){Y.a.ToastError()})).finally((function(){e.loadingComponent&&e.loadingComponent.onStop()}))}},{key:"onChangeHopDong",value:function(t){var e=this;this.loadingComponent&&this.loadingComponent.onLoading();var a={startDate:this.state.startDate?g()(this.state.startDate,"DD/MM/YYYY").format("DD/MM/YYYY"):"",endDate:this.state.endDate?g()(this.state.endDate,"DD/MM/YYYY").format("DD/MM/YYYY"):"",macCode:this.state.macCode?this.state.macCode:"",hopDongId:t||""};m.a.post(Y.a.GLOBAL_API_PATH+y.y,a).then((function(a){var n=a.data;n.success?(e.loadData(n.result,e.state.startDate,e.state.endDate,e.state.typeFilter),e.setState({hopDongId:t})):Y.a.ToastError()})).catch((function(){Y.a.ToastError()})).finally((function(){e.loadingComponent&&e.loadingComponent.onStop()}))}},{key:"onChangeDate",value:function(t){var e=this;this.loadingComponent&&this.loadingComponent.onLoading();var a={startDate:t[0]?t[0].format("DD/MM/YYYY").format("DD/MM/YYYY"):"",endDate:t[1]?t[1].format("DD/MM/YYYY").format("DD/MM/YYYY"):"",macCode:this.state.macCode?this.state.macCode:"",hopDongId:this.state.hopDongId?this.state.hopDongId:""};m.a.post(Y.a.GLOBAL_API_PATH+y.y,a).then((function(a){var n=a.data;n.success?(e.loadData(n.result,g()(t[0]).format("DD/MM/YYYY"),g()(t[1]).format("DD/MM/YYYY"),e.state.typeFilter),e.setState({startDate:g()(t[0]).format("DD/MM/YYYY"),endDate:g()(t[1]).format("DD/MM/YYYY")})):Y.a.ToastError()})).catch((function(){Y.a.ToastError()})).finally((function(){e.loadingComponent&&e.loadingComponent.onStop()}))}},{key:"onChangeFilterType",value:function(t){var e=this;this.loadingComponent&&this.loadingComponent.onLoading();var a={startDate:this.state.startDate?g()(this.state.startDate,"DD/MM/YYYY").format("DD/MM/YYYY"):"",endDate:this.state.endDate?g()(this.state.endDate,"DD/MM/YYYY").format("DD/MM/YYYY"):"",macCode:this.state.macCode?this.state.macCode:"",hopDongId:this.state.hopDongId?this.state.hopDongId:""};m.a.post(Y.a.GLOBAL_API_PATH+y.y,a).then((function(a){var n=a.data;n.success?(e.loadData(n.result,e.state.startDate,e.state.endDate,t),e.setState({typeFilter:t})):Y.a.ToastError()})).catch((function(){Y.a.ToastError()})).finally((function(){e.loadingComponent&&e.loadingComponent.onStop()}))}},{key:"renderFilter",value:function(){var t=this,e=this.state,a=e.dataMac,n=e.dataHopDong;return D.a.createElement(s.a,Object.assign({},I,{name:"basic",style:{display:"flex",background:"#fff",alignItems:"center",borderRadius:5,padding:5,height:60}}),D.a.createElement(s.a.Item,{label:"Lo\u1ea1i",name:"type",style:{flex:1,marginBottom:0}},D.a.createElement(c.a,{placeholder:"Ch\u1ecdn",allowClear:!1,onChange:function(e){return t.onChangeFilterType(e)},defaultValue:1},D.a.createElement(c.a.Option,{value:1},"Theo th\xe1ng"),D.a.createElement(c.a.Option,{value:2},"Theo ng\xe0y"))),D.a.createElement(s.a.Item,{label:"T\u1eeb ng\xe0y",name:"startDate",style:{flex:1,marginBottom:0}},D.a.createElement(O,{defaultValue:[g()(this.state.startDate,"DD/MM/YYYY"),g()(this.state.endDate,"DD/MM/YYYY")],format:"DD/MM/YYYY",onChange:function(e){return t.onChangeDate(e)}})),D.a.createElement(s.a.Item,{label:"MAC",name:"macCode",style:{flex:1,marginBottom:0}},D.a.createElement(c.a,{placeholder:"Ch\u1ecdn",allowClear:!0,onChange:function(e){return t.onChangeMac(e)}},h.a.map(a,(function(t){return D.a.createElement(c.a.Option,{value:t.id},t.macCode)})))),D.a.createElement(s.a.Item,{label:"H\u1ee3p \u0111\u1ed3ng",name:"hopDongId",style:{flex:1,marginBottom:0}},D.a.createElement(c.a,{placeholder:"Ch\u1ecdn",allowClear:!0,onChange:function(e){return t.onChangeHopDong(e)}},h.a.map(n,(function(t){return D.a.createElement(c.a.Option,{value:t.id},t.tenHopDong)})))),D.a.createElement(s.a.Item,{name:"export",style:{marginBottom:0}},D.a.createElement(_.a,{tile:"Export excel",style:{height:32,marginBottom:10},key:"submit",type:"primary",size:"large",onClick:this.exportExcel},D.a.createElement(k.a,{style:{zIndex:10,color:"#fff",fontSize:12},name:"cilDataTransferDown"}))))}},{key:"loadData",value:function(t,e,a,n){console.log("load data",e,a);var o=this.state.data,r=[],l=[],i=[],s=[];2==n?(s=this.getRangeDate(e,a),i=h.a.groupBy(t,(function(t){return g()(h.a.get(t.thongTinMeTron,"ngayTron")).format("DD/MM/YYYY")}))):(s=this.getRangeDateMonth(e,a),i=h.a.groupBy(t,(function(t){return g()(h.a.get(t.thongTinMeTron,"ngayTron")).format("MM/YYYY")}))),console.log(i,s,e,a),h.a.forEach(s,(function(t){Object.keys(i).forEach((function(e){if(e==t.label){var a=0,n=0,o=0,s=0,c=0,d=0,m=0,u=0,p=0,g=0,f=0,D=0;h.a.forEach(i[e],(function(t){a+=t.da,n+=t.catSong,o+=t.xiMang,s+=t.troBay,c+=t.nuoc,d+=t.phuGia1,m+=t.phuGia2,u+=t.da_1m3,p+=t.catSong_1m3,g+=t.xiMang_1m3,f+=t.phuGia1_1m3,D+=t.phuGia2_1m3}));var y={name:e,da:a.toFixed(2),catSong:n.toFixed(2),xiMang:o.toFixed(2),troBay:s.toFixed(2),nuoc:c.toFixed(2),phuGia1:d.toFixed(2),phuGia2:m.toFixed(2)},Y={name:e,da_1m3:u.toFixed(2),catSong_1m3:p.toFixed(2),xiMang_1m3:g.toFixed(2),phuGia1_1m3:f.toFixed(2),phuGia2_1m3:D.toFixed(2)};r.push(y),l.push(Y)}}))})),o[0].results=r,o[1].results=l,this.setState({data:o,loading:!1})}},{key:"onDownload",value:function(){this.loadingComponent&&this.loadingComponent.onLoading()}},{key:"onDownloaded",value:function(){this.loadingComponent&&this.loadingComponent.onStop()}},{key:"render",value:function(){var t=this,e=this.state,a=e.loading,n=e.data,o=e.maxData,r=e.minData;return a?D.a.createElement(M.a,null):D.a.createElement("div",{ref:function(e){return t.Container=e},className:"container-haohut-lpg",style:{paddingLeft:15,paddingRight:15,height:"100%"}},D.a.createElement(L,{ref:function(e){t.loadingComponent=e}}),this.renderFilter(),h.a.map(n,(function(e,a){return D.a.createElement("div",{key:a,style:{width:"100%",height:350,marginTop:10}},D.a.createElement(T,{title:t.title,onDownload:function(){return t.onDownload(e.subTitle)},onDownloaded:function(){return t.onDownloaded()},dom:"image-dom".concat(a),headerColor:a%3===0?"#D6F4B1":a%3===1?"#FDF2D5":"#FFD7DA",exportIconColor:a%3===0?"#298C39":a%3===1?"#FEC32A":"#FB3042",dataKeyMap:n[a].dataKeyMap?n[a].dataKeyMap:t.dataKeyMap,dataColorMap:n[a].dataColorMap?n[a].dataColorMap:t.dataColorMap,subTitle:e.subTitle,data:e.results,range:[r,o],ticks:[r,o],unit:e.unit,labelTooltip:t.labelTooltip}))})))}}]),a}(f.Component),L=(e.default=S,function(t){Object(r.a)(a,t);var e=Object(l.a)(a);function a(t){var o;return Object(n.a)(this,a),(o=e.call(this,t)).state={},o}return Object(o.a)(a,[{key:"onLoading",value:function(){this.divElement&&(this.divElement.style.display="flex")}},{key:"onStop",value:function(){this.divElement&&(this.divElement.style.display="none")}},{key:"render",value:function(){var t=this;return D.a.createElement("div",{ref:function(e){t.divElement=e},className:"loading-component",style:{zIndex:99,display:"none",position:"absolute",top:0,bottom:0,left:0,right:0,backgroundColor:"#00000085",justifyContent:"center",alignItems:"center"}},D.a.createElement("div",{className:"lds-ellipsis"},D.a.createElement("div",null),D.a.createElement("div",null),D.a.createElement("div",null),D.a.createElement("div",null)))}}]),a}(f.Component))},717:function(t,e,a){"use strict";var n=a(161),o=a(162),r=a(164),l=a(163),i=a(1),s=a.n(i),c=(a(733),function(t){Object(r.a)(a,t);var e=Object(l.a)(a);function a(t){var o;return Object(n.a)(this,a),(o=e.call(this,t)).state={},o}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"loading",style:{"--n":"5"}},s.a.createElement("div",{className:"dot",style:{"--i":"0"}}),s.a.createElement("div",{className:"dot",style:{"--i":"1"}}),s.a.createElement("div",{className:"dot",style:{"--i":"2"}}),s.a.createElement("div",{className:"dot",style:{"--i":"3"}}),s.a.createElement("div",{className:"dot",style:{"--i":"4"}}))}}]),a}(s.a.Component));e.a=c},733:function(t,e,a){}}]);
//# sourceMappingURL=15.84ebed55.chunk.js.map